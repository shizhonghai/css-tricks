# webpack 中的模块热替换是指什么？原理是怎么样的?

HMR 即 Hot Module Replacement 是指当你对代码修改并保存后，webpack 将会对代码进行重新打包，并将改动的模块发送到浏览器端，浏览器用新的模块替换掉旧的模块，去实现局部更新页面而非整体刷新页面。

原理：
1. 服务端和浏览器使用 `websocket` 实现长连接。
2. `webpack` 监听源文件的变化，每次编译都会生成 hash 值、已改动模块的 json 文件、已改动模块代码的js文件，编译完成后通过socket向浏览器推送当前编译的hash戳。
3. 浏览器的 `websocket` 监听到有文件改动推送过来的hash戳，会和上一次对比。一致则走缓存；不一致则通过ajax和jsonp向服务端获取最新资源。
4. 使用内存文件系统去替换有修改的内容实现局部刷新。
